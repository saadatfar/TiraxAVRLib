
void spi_send(unsigned char addr,char data)
{
	  spi(addr);
      spi(data);
      Load = 1;
      delay_us(100);
      Load = 0;
}

void max7219_init(void)
{
	spi_send(SDR,Normal);
	spi_send(DMR,NoDecode);
	spi_send(IR,INTENSITY(100));
	spi_send(SLR,DIGIT_DISPLAY(8));
	spi_send(DMR,NoDecode);
}
unsigned char numbers[] = {
	0b01111110, //0
	0b00110000, //1
	0b01101101, //2
	0b01111001, //3
	0b00110011, //4
	0b01011111, //5
	0b01011111, //6
	0b01110000, //7
	0b01111111, //8
	0b01111011, //9
	0b00000001, //-
	0b00000000, //Blank
}
void max7219_rotate(unsigned char in[8],unsigned char out[8])
{
	int i,j;
	for(i=0;i<8;i++)
	{
		out(i) = 0;
		for(j=0;j<8;j++)
		{
			out(i) = out(i) + (((in(j)&(1<<i))>>i)<<j);
		}
	}
}